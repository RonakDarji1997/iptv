
ğŸš€ Stream Subtitle Server running on port 8770
ğŸ“ Python Whisper service on port 8771

Endpoints:
  POST /start-subtitle - Start subtitle generation
  POST /stop-subtitle - Stop subtitle generation
  GET /subtitle/:streamId.vtt - Download subtitle file
  GET /active-jobs - List active jobs
  GET /health - Health check


ğŸ›‘ ===== RECEIVED STOP REQUEST =====
ğŸ›‘ Stream ID: 8b4a6b0c3922
====================================

âŒ Stream not found: 8b4a6b0c3922

ğŸ“¥ ===== RECEIVED START REQUEST =====
ğŸ“¥ Stream URL: http://46.151.196.87/vod9/New.English/Series/Updates/Stranger.Things.English/S05/Stranger.Things.English.S05.E02.mp4/video.m3u8?token=1a064c57ccecbe43be8043fc1a4bb63e
ğŸ“¥ Language: auto
ğŸ“¥ Start Position: 1130 seconds
=====================================

ğŸ§¹ Canceling all existing subtitle jobs...
ğŸ—‘ï¸  Deleting 3 old audio files...
ğŸ” Checking for existing jobs... Active jobs: 0
Starting subtitle generation for stream: http://46.151.196.87/vod9/New.English/Series/Updates/Stranger.Things.English/S05/Stranger.Things.English.S05.E02.mp4/video.m3u8?token=1a064c57ccecbe43be8043fc1a4bb63e
Stream ID: c016fb7047ae
VTT file: /Users/ronika/Desktop/iptv/android-tv-native/whisper-backend/subtitles/c016fb7047ae.vtt
FFmpeg command: ffmpeg -ss 1130 -i http://46.151.196.87/vod9/New.English/Series/Updates/Stranger.Things.English/S05/Stranger.Things.English.S05.E02.mp4/video.m3u8?token=1a064c57ccecbe43be8043fc1a4bb63e -vn -acodec pcm_s16le -ar 16000 -ac 1 -af silencedetect=n=-30dB:d=2 -f segment -segment_time 2 -segment_format wav -reset_timestamps 1 /Users/ronika/Desktop/iptv/android-tv-native/whisper-backend/subtitles/c016fb7047ae_chunk_%03d.wav
â±ï¸  Starting from 1130s, generating continuously until stopped
âœ… Stream ID created: c016fb7047ae
âœ… Subtitle URL: http://192.168.2.69:8770/subtitle/c016fb7047ae.vtt
â³ Waiting for first subtitle to be ready...
/Users/ronika/Desktop/iptv/android-tv-native/whisper-backend/stream-subtitle-server.js:232
        const chunkPath = path.join(SUBTITLE_DIR, filename);
                          ^

ReferenceError: Cannot access 'path' before initialization
    at FSWatcher.<anonymous> (/Users/ronika/Desktop/iptv/android-tv-native/whisper-backend/stream-subtitle-server.js:232:27)
    at FSWatcher.emit (node:events:518:28)
    at FSWatcher._handle.onchange (node:internal/fs/watchers:215:12)

Node.js v20.18.1
